import{r as p,o as y,j as e,p as j,s as b}from"./index-DWe2POQ8.js";function v(){const[a,x]=p.useState(""),[n,c]=p.useState(null),[o,i]=p.useState(!1),[d,l]=p.useState(null),t=p.useCallback(async()=>{const s=a.trim();if(s){i(!0),l(null),c(null);try{const r=await b(s);r?c(r):l("Ticker not found")}catch{l("Search failed")}i(!1)}},[a]);return e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"9px",color:"#9ca3af",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase",marginBottom:"6px"},children:"Search Any Ticker"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("input",{type:"text",placeholder:"Ticker (e.g. AAPL, TSLA, MSFT)",value:a,onChange:s=>x(s.target.value.toUpperCase()),onKeyDown:s=>{s.key==="Enter"&&t()},style:{flex:1,padding:"6px 10px",fontSize:"11px",background:"#111827",border:"1px solid #374151",borderRadius:"4px",color:"#e5e7eb",outline:"none"}}),e.jsx("button",{onClick:t,disabled:o,style:{padding:"6px 14px",fontSize:"10px",fontWeight:600,background:"#1f2937",border:"1px solid #374151",borderRadius:"4px",color:"#9ca3af",cursor:"pointer"},children:o?"...":"GO"})]}),d&&e.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px"},children:d}),n&&e.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"#0d0d14",borderRadius:"6px",border:"1px solid #1f2937"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"4px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:"#e5e7eb"},children:n.symbol}),n.name&&e.jsx("span",{style:{fontSize:"10px",color:"#6b7280",marginLeft:"6px"},children:n.name})]}),e.jsx("span",{style:{fontSize:"13px",fontWeight:700,color:"#e5e7eb",fontVariantNumeric:"tabular-nums"},children:n.price})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",color:n.positive?"#22c55e":"#ef4444",fontWeight:600,fontVariantNumeric:"tabular-nums"},children:n.change}),n.sparkline&&n.sparkline.length>1&&e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"1px",height:"18px"},children:n.sparkline.map((s,r)=>{const h=Math.max(...n.sparkline),f=Math.min(...n.sparkline),m=h-f||1,u=(s-f)/m*15+3,g=r>0?s>=n.sparkline[r-1]:!0;return e.jsx("div",{style:{width:"3px",height:`${u}px`,borderRadius:"1px",background:g?"#22c55e":"#ef4444"}},r)})})]})]})]})}function k({country:a,stocksData:x,lastUpdated:n,isOpen:c,onClose:o}){if(p.useEffect(()=>{if(!c)return;const t=s=>{s.key==="Escape"&&o()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[c,o]),!c||!a)return null;const i=x?x.find(t=>t.country===a):null;if(!i)return null;const d=j[a],l=y(a);return e.jsx("div",{className:"modal-overlay active",onClick:t=>{t.target===t.currentTarget&&o()},children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{className:"modal-flag",children:i.flag}),e.jsxs("div",{className:"modal-titles",children:[e.jsxs("div",{className:"modal-title",children:[a," Markets"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"10px",color:l.isOpen?"#22c55e":"#9ca3af",marginTop:"2px"},children:[e.jsx("span",{style:{width:"7px",height:"7px",borderRadius:"50%",display:"inline-block",background:l.isOpen?"#22c55e":"#ef4444",boxShadow:l.isOpen?"0 0 6px #22c55e":"none"}}),"Market ",l.label]})]}),e.jsx("button",{className:"modal-close",onClick:o,children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{style:{fontSize:"10px",color:"#9ca3af",marginBottom:"12px"},children:i.sentiment}),e.jsxs("div",{className:"stocks-section",children:[e.jsx("div",{className:"stocks-section-title",children:"Market Overview"}),i.indices.map((t,s)=>t.noData?e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid #1f293744"},children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"11px"},children:t.name}),e.jsx("span",{style:{color:"#6b7280",fontSize:"11px"},children:"Data unavailable"})]},s):e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 0",borderBottom:"1px solid #1f293744"},children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"11px",flex:1},children:t.name}),e.jsx("span",{style:{color:"#e5e7eb",fontSize:"12px",fontWeight:600,textAlign:"right",minWidth:"70px",fontVariantNumeric:"tabular-nums"},children:t.value}),e.jsx("span",{style:{color:t.positive?"#22c55e":"#ef4444",fontSize:"11px",fontWeight:700,textAlign:"right",minWidth:"60px",fontVariantNumeric:"tabular-nums"},children:t.change})]},s))]}),i.sparkline&&i.sparkline.length>1&&e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"2px",height:"28px",margin:"12px 0"},children:i.sparkline.map((t,s)=>{const r=Math.max(...i.sparkline),h=Math.min(...i.sparkline),f=r-h||1,m=(t-h)/f*22+6,u=s>0?t>=i.sparkline[s-1]:!0;return e.jsx("div",{style:{flex:1,height:`${m}px`,borderRadius:"2px",background:u?"#22c55e":"#ef4444",opacity:.7}},s)})}),e.jsx(v,{}),d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stocks-section",children:[e.jsx("div",{className:"stocks-section-title",children:"Why It Matters"}),e.jsx("p",{style:{fontSize:"11px",color:"#9ca3af",lineHeight:1.6},children:d.whyMatters})]}),e.jsxs("div",{className:"stocks-section",children:[e.jsx("div",{className:"stocks-section-title",children:"Outlook"}),e.jsx("p",{style:{fontSize:"11px",color:"#9ca3af",lineHeight:1.6},children:d.outlook}),e.jsx("p",{style:{fontSize:"9px",color:"#6b7280",marginTop:"8px",fontStyle:"italic"},children:"Not financial advice. Data may be delayed up to 15 minutes."})]})]}):e.jsx("div",{style:{fontSize:"9px",color:"#6b7280",padding:"8px 0",fontStyle:"italic"},children:"Data may be delayed up to 15 minutes. Not financial advice."}),e.jsxs("div",{style:{fontSize:"8px",color:"#374151",textAlign:"right",marginTop:"8px"},children:["Last updated: ",n?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"]})]})]})})}export{k as default};
