import{r as x,g as S,C as k,j as s,h as L,i as y,k as N,l as w,m as T}from"./index-PEUxsPDE.js";function E({countryName:l,isOpen:h,onClose:p}){const[u,f]=x.useState([]),[b,j]=x.useState(!1),[g,v]=x.useState(!1),a=l?k[l]:null;if(x.useEffect(()=>{h&&l&&(f([]),j(!0),v(!1),S(l).then(e=>{f(e||[]),j(!1)}).catch(()=>{j(!1)}))},[h,l]),x.useEffect(()=>{if(!h)return;const e=r=>{r.key==="Escape"&&p()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,p]),!h||!a||!l)return null;const t=T[l],d=[];a.region&&d.push({label:"Region",value:a.region}),a.pop&&d.push({label:"Population",value:a.pop}),a.gdp&&d.push({label:"GDP",value:a.gdp}),a.leader&&d.push({label:"Leader",value:a.leader});const o=[];return a.analysis&&(typeof a.analysis=="string"?o.push({num:1,title:"What Happened",text:a.analysis}):(a.analysis.what&&o.push({num:1,title:"What Happened",text:a.analysis.what}),a.analysis.why&&o.push({num:2,title:"Why It Matters",text:a.analysis.why}),a.analysis.next&&o.push({num:3,title:"What Might Happen",text:a.analysis.next}))),s.jsx("div",{className:"modal-overlay active",onClick:e=>{e.target===e.currentTarget&&p()},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("span",{className:"modal-flag",children:a.flag}),s.jsxs("div",{className:"modal-titles",children:[s.jsxs("div",{className:"modal-title",children:[s.jsx("span",{children:l}),s.jsx("span",{className:`modal-risk risk-${a.risk}`,style:{color:"#fff"},children:a.risk.toUpperCase()})]}),s.jsx("div",{className:"modal-subtitle",children:a.title||a.region})]}),s.jsx("button",{className:"modal-close",onClick:p,children:"×"})]}),s.jsxs("div",{className:"modal-body",children:[d.length>0&&s.jsx("div",{className:"facts-grid",style:{marginBottom:"16px"},children:d.map((e,r)=>s.jsxs("div",{className:"fact",children:[s.jsx("div",{className:"fact-label",children:e.label}),s.jsx("div",{className:"fact-value",children:e.value})]},r))}),s.jsxs("div",{style:{marginTop:"16px"},children:[s.jsx("div",{className:"section-title",children:"Risk Trend & Indicators"}),s.jsx("div",{dangerouslySetInnerHTML:{__html:L(l,a.risk)}})]}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"section-title",children:"Situation Analysis"}),o.map(e=>s.jsxs("div",{className:"analysis-block",children:[s.jsxs("div",{className:"analysis-header",children:[s.jsx("div",{className:`analysis-num n${e.num}`,children:e.num}),s.jsx("div",{className:"analysis-title",children:e.title})]}),s.jsx("p",{className:"analysis-text",children:e.text})]},e.num))]}),a.news&&a.news.length>0&&s.jsxs("div",{style:{marginTop:"16px"},children:[s.jsx("div",{className:"section-title",children:"Recent Coverage"}),y(a.news).map((e,r)=>{let n=e.headline,i=e.source;if(i&&i.includes("Google News")&&n){const c=n.lastIndexOf(" - ");c>0&&(i=n.substring(c+3).trim(),n=n.substring(0,c).trim())}const m=N(i);return s.jsxs("div",{className:"news-item",children:[s.jsxs("div",{className:"news-meta",children:[s.jsxs("span",{className:"news-source",children:[i,m&&s.jsx("span",{style:{fontSize:"7px",color:"#f59e0b",background:"#78350f",padding:"1px 4px",borderRadius:"3px",marginLeft:"6px",fontWeight:600,letterSpacing:"0.3px"},children:m})]}),s.jsx("span",{className:"news-time",children:e.time})]}),s.jsx("div",{dangerouslySetInnerHTML:{__html:w(i)}}),s.jsx("div",{className:"news-headline",children:n}),e.url&&e.url!=="#"&&s.jsx("a",{className:"news-link",href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read more ↗"})]},r)})]}),s.jsxs("div",{className:"country-news-section",children:[s.jsxs("div",{className:"country-news-title",children:["LIVE NEWS FOR ",l.toUpperCase()]}),b?s.jsx("div",{className:"country-news-loading",children:"Loading latest news..."}):u.length>0?y(u).map((e,r)=>{let n=e.headline,i=e.source;if(i&&i.includes("Google News")&&n){const c=n.lastIndexOf(" - ");c>0&&(i=n.substring(c+3).trim(),n=n.substring(0,c).trim())}const m=N(i);return s.jsxs("div",{className:"news-item",children:[s.jsxs("div",{className:"news-meta",children:[e.category&&s.jsx("span",{className:`card-cat ${e.category}`,style:{fontSize:"7px",padding:"1px 4px"},children:e.category}),s.jsxs("span",{className:"news-source",children:[i,m&&s.jsx("span",{style:{fontSize:"7px",color:"#f59e0b",background:"#78350f",padding:"1px 4px",borderRadius:"3px",marginLeft:"6px",fontWeight:600,letterSpacing:"0.3px"},children:m})]}),s.jsx("span",{className:"news-time",children:e.time})]}),s.jsx("div",{dangerouslySetInnerHTML:{__html:w(i)}}),s.jsx("div",{className:"news-headline",children:n}),e.url&&e.url!=="#"&&s.jsx("a",{className:"news-link",href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read more ↗"})]},r)}):s.jsx("div",{style:{color:"#6b7280",fontSize:"11px"},children:"No major international news coverage for this country at this time. This typically indicates a period of relative stability."})]}),s.jsxs("div",{className:"sanctions-section",children:[s.jsxs("div",{className:"sanctions-toggle",onClick:()=>v(!g),children:[s.jsx("div",{className:"sanctions-toggle-left",children:s.jsx("span",{className:"sanctions-toggle-title",children:"Sanctions"})}),s.jsx("span",{className:`sanctions-chevron${g?" open":""}`,children:"▼"})]}),s.jsx("div",{className:`sanctions-body${g?" open":""}`,children:s.jsxs("div",{className:"sanctions-inner",children:[t&&t.on&&t.on.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sanctions-group-title",children:["Sanctions on ",l]}),t.on.map((e,r)=>s.jsxs("div",{className:"sanction-item",children:[s.jsxs("div",{className:"sanction-header",children:[s.jsx("span",{className:"sanction-by",children:e.by}),s.jsx("span",{className:"sanction-year",children:e.year})]}),s.jsx("div",{className:"sanction-reason",children:e.reason})]},r))]}),t&&t.by&&t.by.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sanctions-group-title",children:["Sanctions by ",l]}),t.by.map((e,r)=>s.jsxs("div",{className:"sanction-item",children:[s.jsxs("div",{className:"sanction-header",children:[s.jsx("span",{className:"sanction-by",children:e.target}),s.jsx("span",{className:"sanction-year",children:e.year})]}),s.jsx("div",{className:"sanction-reason",children:e.reason})]},r))]}),(!t||!t.on?.length&&!t.by?.length)&&s.jsx("div",{className:"sanctions-none",children:"No active sanctions data for this country."})]})})]})]})]})})}export{E as default};
