<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BPERYSHR4W"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BPERYSHR4W');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Hegemon Global — Interactive geopolitical analysis platform featuring real-time global news, market data, trade flows, and country comparisons on an interactive 3D globe.">
  <meta name="author" content="Hegemon Global">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Hegemon Global — Geopolitical Analysis Platform">
  <meta property="og:description" content="Explore global geopolitics, markets, and trade flows on an interactive 3D globe.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hegemonglobal.com">
  <meta property="og:image" content="https://hegemonglobal.com/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Hegemon Global">
  <meta name="twitter:description" content="Interactive geopolitical analysis platform.">
  <meta name="twitter:image" content="https://hegemonglobal.com/og-image.png">

  <title>Hegemon Global — Geopolitical Analysis Platform</title>

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- SPA Redirect for GitHub Pages -->
  <script type="text/javascript">
    (function(l) {
      if (l.search[1] === '/') {
        var decoded = l.search.slice(1).split('&').map(function(s) {
          return s.replace(/~and~/g, '&')
        }).join('?');
        window.history.replaceState(null, null, l.pathname.slice(0, -1) + decoded + l.hash);
      }
    }(window.location))
  </script>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/globe.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/modals.css">
  <link rel="stylesheet" href="css/stocks.css">
  <link rel="stylesheet" href="css/trade-routes.css">
  <link rel="stylesheet" href="css/compare.css">
  <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
<!-- Breaking News Banner -->
<div class="breaking-banner" id="breakingBanner">
  <span class="breaking-label">BREAKING</span>
  <span class="breaking-text" id="breakingText"></span>
  <button class="breaking-close" onclick="closeBanner()">&times;</button>
</div>

<div class="app">
  <div class="globe-container">
    <div id="globeLoader" style="position:absolute;top:0;left:0;width:100%;height:100%;background:#070710;display:flex;align-items:center;justify-content:center;z-index:10;transition:opacity 0.8s ease;">
      <div style="text-align:center;">
        <div style="width:40px;height:40px;border:3px solid #1f2937;border-top:3px solid #06b6d4;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px;"></div>
        <div style="font-size:10px;color:#6b7280;letter-spacing:1px;">LOADING GLOBE</div>
      </div>
    </div>
    <style>@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style>
    <div id="globe"></div>
    <div class="header">
      <div class="header-content">
        <div>
          <div class="logo">HEGEMON</div>
          <div class="logo-sub">GLOBAL INTELLIGENCE NETWORK</div>
        </div>
      </div>
    </div>
    <div class="header-right">
      <div class="live"><div class="live-dot"></div>LIVE</div>
      <div class="date" id="currentDate"></div>
    </div>

    <div class="watchlist" id="watchlist"></div>

    <div id="featureBtnsDesktop" style="position:absolute;left:16px;top:80px;z-index:10;display:flex;flex-direction:column;gap:6px;">
      <button class="globe-feature-btn" id="tradeRoutesBtn" onclick="toggleTradeRoutes()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
        TRADE ROUTES
      </button>
      <button class="globe-feature-btn" id="compareModeBtn" onclick="toggleCompareMode()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        COMPARE MODE
      </button>
    </div>
    <div class="compare-instruction" id="compareInstruction" style="display:none !important;"></div>
    <div class="compare-hint" id="compareHint" style="display:none;">Click a country to compare</div>
    <div class="trade-tooltip" id="tradeTooltip"></div>
    <div class="compare-panel" id="comparePanel">
      <div class="compare-header">
        <span class="compare-title">Country Comparison</span>
        <button class="compare-close" onclick="toggleCompareMode()">&times;</button>
      </div>
      <div class="compare-search-wrap">
        <input type="text" id="compareSearchInput" class="compare-search" placeholder="Search to add country..." oninput="searchCompareCountry(this.value)">
        <div class="compare-search-results" id="compareSearchResults"></div>
      </div>
      <div class="compare-countries" id="compareCountries"></div>
      <div class="compare-data-area" id="compareDataArea">
        <div class="compare-radar-container"><canvas id="radarChart" width="300" height="300"></canvas></div>
        <div id="compareContent"></div>
      </div>
    </div>
    <div class="stocks-modal-overlay" id="stocksModalOverlay" onclick="if(event.target===this)closeStocksModal()">
      <div class="stocks-modal">
        <div class="modal-header">
          <span class="modal-flag" id="stocksModalFlag"></span>
          <div class="modal-titles">
            <div class="modal-title"><span id="stocksModalTitle"></span></div>
            <div class="modal-subtitle" id="stocksModalSubtitle"></div>
          </div>
          <button class="modal-close" onclick="closeStocksModal()">&times;</button>
        </div>
        <div class="modal-body" id="stocksModalBody" style="padding:16px;overflow-y:auto;flex:1;"></div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-title">RISK LEVELS</div>
      <div class="legend-items">
        <div class="legend-item"><div class="legend-icon" style="background:#dc2626"></div>Catastrophic</div>
        <div class="legend-item"><div class="legend-icon" style="background:#f97316"></div>Extreme</div>
        <div class="legend-item"><div class="legend-icon" style="background:#eab308"></div>Severe</div>
        <div class="legend-item"><div class="legend-icon" style="background:#8b5cf6"></div>Stormy</div>
        <div class="legend-item"><div class="legend-icon" style="background:#3b82f6"></div>Cloudy</div>
        <div class="legend-item"><div class="legend-icon" style="background:#22c55e"></div>Clear</div>
      </div>
    </div>

    <div class="globe-tools" id="globeTools">
      <button class="globe-tool-btn" onclick="openTOS()" title="Terms of Service">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
      </button>
      <button class="globe-tool-btn" id="searchBtn" onclick="openSearchOverlay()" title="Search Countries">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      </button>
      <button class="globe-tool-btn active" id="rotateToggle" onclick="toggleRotation()" title="Auto-Rotate">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4m0 12v4M2 12h4m12 0h4m-5.66-5.66l-2.83 2.83m-5.66 5.66l-2.83 2.83m0-11.32l2.83 2.83m5.66 5.66l2.83 2.83"/></svg>
      </button>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
      <div class="search-overlay-header">
        <input type="text" id="globeSearchInput" placeholder="Search countries..." oninput="searchCountriesGlobe(this.value)">
        <button onclick="closeSearchOverlay()">&times;</button>
      </div>
      <div class="search-overlay-results" id="globeSearchResults"></div>
    </div>

    <!-- Trade Route Info Panel -->
    <div class="trade-info-panel" id="tradeInfoPanel">
      <div class="trade-info-header">
        <span class="trade-info-title" id="tradeInfoTitle">Trade Route</span>
        <button class="trade-info-close" onclick="closeTradeInfoPanel()">&times;</button>
      </div>
      <div class="trade-info-body" id="tradeInfoBody"></div>
    </div>

    <div class="stats">
      <div class="stat-card" onclick="showStatPopup('critical')"><div class="stat-value" style="color:#ef4444" id="statCritical">0</div><div class="stat-label">Critical</div></div>
      <div class="stat-card" onclick="showStatPopup('high')"><div class="stat-value" style="color:#f97316" id="statHigh">0</div><div class="stat-label">High Risk</div></div>
      <div class="stat-card" onclick="showStatPopup('stable')"><div class="stat-value" style="color:#22c55e" id="statStable">0</div><div class="stat-label">Stable</div></div>
      <div class="stat-card" onclick="showStatPopup('all')"><div class="stat-value" style="color:#06b6d4" id="statTotal">0</div><div class="stat-label">Countries</div></div>
    </div>

    <div class="stat-popup" id="statPopup">
      <div class="stat-popup-header">
        <span class="stat-popup-title" id="statPopupTitle">Countries</span>
        <button class="stat-popup-close" onclick="closeStatPopup()">&times;</button>
      </div>
      <div id="statPopupContent"></div>
    </div>
  </div>

  <div class="sidebar">
    <div class="tabs">
      <button class="tab active" data-tab="daily">Articles</button><button class="tab" data-tab="newsletter">Brief</button><button class="tab" data-tab="elections">Elections</button><button class="tab" data-tab="forecast">Forecast</button><button class="tab" data-tab="horizon">Horizon</button><button class="tab" data-tab="stocks">Stocks</button>
    </div>
    <div style="display:flex;align-items:center;justify-content:space-between;padding:4px 12px;background:#0a0a0f;border-bottom:1px solid #1f2937;">
      <div id="newsTimestamp" style="font-size:10px;color:#6b7280;">Loading live news...</div>
      <div id="fontControls" style="display:flex;gap:3px;align-items:center;touch-action:manipulation;">
        <button onclick="adjustFontSize(-1)" style="width:22px;height:22px;border-radius:4px;border:1px solid #374151;background:#111827;color:#9ca3af;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;touch-action:manipulation;" title="Decrease text size">A-</button>
        <button onclick="resetFontSize()" style="width:22px;height:22px;border-radius:4px;border:1px solid #374151;background:#111827;color:#6b7280;font-size:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;touch-action:manipulation;" title="Reset text size">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 12a9 9 0 1 1 3 6.7"/><polyline points="3 22 3 16 9 16"/></svg>
        </button>
        <button onclick="adjustFontSize(1)" style="width:22px;height:22px;border-radius:4px;border:1px solid #374151;background:#111827;color:#9ca3af;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;touch-action:manipulation;" title="Increase text size">A+</button>
      </div>
    </div>
    <div class="sidebar-content" id="sidebarContent"></div>
  </div>
</div>

<div class="country-tooltip" id="tooltip"></div>

<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-header">
      <span class="modal-flag" id="modalFlag"></span>
      <div class="modal-titles">
        <div class="modal-title"><span id="modalTitle"></span><span class="modal-risk" id="modalRisk"></span></div>
        <div class="modal-subtitle" id="modalSubtitle"></div>
      </div>
      <button class="modal-close" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<!-- Terms of Service / Privacy Policy Modal -->
<div class="tos-overlay" id="tosOverlay" onclick="if(event.target===this)closeTOS()">
  <div class="tos-modal">
    <div class="tos-header">
      <div class="tos-tabs">
        <button class="tos-tab active" onclick="switchTosTab('terms')">Terms of Service</button>
        <button class="tos-tab" onclick="switchTosTab('privacy')">Privacy Policy</button>
      </div>
      <button class="tos-close" onclick="closeTOS()">&times;</button>
    </div>
    <div class="tos-body" id="tosBody"></div>
  </div>
</div>

  <!-- JavaScript (load order matters) -->
  <script src="js/utils.js"></script>
  <script src="js/data.js"></script>
  <script src="js/news.js"></script>
  <script src="js/api.js"></script>
  <script src="js/globe.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/stocks.js"></script>
  <script src="js/trade-data.js"></script>
  <script src="js/trade-routes.js"></script>
  <script src="js/compare.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
